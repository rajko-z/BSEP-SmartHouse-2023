<div>
  <div class="container" [formGroup]="this.passwordForm">
    <br/>
    <h1>Change password</h1>
    <hr/>
    <br/>
    <mat-form-field appearance="outline">
      <mat-label>Current password</mat-label>
      <input matInput
             required
             [type]="hideCurrPassword ? 'password' : 'text'"
             formControlName="currPassword"
      >
      <button [disabled]="this.passwordForm.controls.currPassword.value?.length === 0" class="icon" mat-icon-button matSuffix (click)="hideCurrPassword= !hideCurrPassword"
              [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hideCurrPassword">
        <mat-icon>{{hideCurrPassword ? 'visibility_off' : 'visibility'}}</mat-icon>
      </button>
      <mat-error>Current password is required</mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>New password</mat-label>
      <input matInput
             required
             [type]="hideNewPassword ? 'password' : 'text'"
             formControlName="newPassword"
      >
      <button [disabled]="this.passwordForm.controls.newPassword.value?.length === 0" class="icon" mat-icon-button matSuffix (click)="hideNewPassword = !hideNewPassword"
              [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hideNewPassword">
        <mat-icon>{{hideNewPassword ? 'visibility_off' : 'visibility'}}</mat-icon>
      </button>

      <mat-error *ngIf="this.passwordForm.controls['newPassword'].hasError('required')">New password is required</mat-error>
      <span><mat-error *ngIf="this.passwordForm.controls['newPassword'].hasError('pattern')">At least 8 chars required, 1 uppercase, 1 lowercase, 1 number and 1 special char</mat-error></span>
      <mat-error *ngIf="this.passwordForm.controls['newPassword'].hasError('passwordSame')">New password can't be same as previous</mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Repeat Password</mat-label>
      <input matInput
             required
             [type]="hideRepeatPassword ? 'password' : 'text'"
             formControlName="repeatedPassword"
      >
      <button [disabled]="this.passwordForm.controls.repeatedPassword.value?.length === 0" class="icon" mat-icon-button matSuffix (click)="hideRepeatPassword= !hideRepeatPassword"
              [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hideRepeatPassword">
        <mat-icon>{{hideRepeatPassword ? 'visibility_off' : 'visibility'}}</mat-icon>
      </button>
      <mat-error *ngIf="this.passwordForm.controls['repeatedPassword'].hasError('required')">Repeat password is required</mat-error>
      <span><mat-error *ngIf="this.passwordForm.controls['repeatedPassword'].hasError('pattern')">At least 8 chars required, 1 uppercase, 1 lowercase, 1 number and 1 special char</mat-error></span>
      <mat-error *ngIf="this.passwordForm.controls['repeatedPassword'].hasError('noMatch')">Repeated password and new password doesn't match</mat-error>
    </mat-form-field>
    <br/>
    <button mat-raised-button color="primary" type="submit" (click)="onSubmit()">
      Save
    </button>
  </div>
</div>

